import{e as v,i as N,h as i,y as m,s as z,a as k,b as e,j as y,f as I,t as C,T,I as B,k as L,d as _}from"./index-BY5sadQB.js";import{I as $}from"./Image-CjgMHeUq.js";import{c as j}from"./api-sGwyN5m7.js";function P(){const[E,h]=v(),{id:o}=N(),[t,p]=i();m(()=>{o&&j(o).then(s=>{p(s),z(s.title)}).catch(s=>{h("/"),k(s.message,"error")})},[]);const[n,f]=i(window.innerWidth>1280),[u,g]=i([]);return m(()=>{if(!(t!=null&&t.content))return;if(window.location.hash){const a=document.getElementById(decodeURIComponent(window.location.hash.slice(1)));a==null||a.scrollIntoView()}const s=t.content.match(/<h\d.*>.*<\/h\d>/g);if(!s)return;const c=s.map(a=>+a[2]),x=Math.min(...c),r=[];s.forEach((a,w)=>{var d;const b=c[w],l=(d=a.match(new RegExp('(?<=id=").+(?=">)')))==null?void 0:d[0];l&&r.push({id:l,text:a.slice(10+l.length,-5),style:{transform:`translateX(${(b-x)*8}px)`}})}),g(r)},[t]),e("div",{className:"bento relative flex-1 overflow-hidden p-0",children:t!==void 0?e(y,{children:[e("figure",{className:"relative aspect-[18/9] w-full overflow-hidden rounded-xl sm:aspect-[28/9] lg:aspect-[32/9] xl:aspect-[40/9]",children:[e($,{src:`Blogs/${o}.webp`,className:"size-full"}),e("figcaption",{className:"absolute left-0 top-0 flex size-full flex-col items-center justify-center gap-0.5 bg-black/50 md:pb-16",children:[e("h1",{className:"mb-3 text-white",children:t.title}),e("span",{className:"text-sm text-zinc-200",children:[t.from_now,"创建 / ",I(t.updated),"更新"]}),e("span",{className:"text-sm text-zinc-200",children:["全篇约",t==null?void 0:t.minutes,"分钟"]})]})]}),e("article",{className:"prose prose-zinc mx-auto rounded-xl bg-white p-5 shadow-xl transition dark:prose-invert prose-pre:rounded-xl prose-img:rounded-xl dark:bg-zinc-700 prose-blockquote:dark:border-s-zinc-500 prose-pre:dark:bg-zinc-900 md:-translate-y-20",dangerouslySetInnerHTML:{__html:t.content}}),e("div",{className:"fixed bottom-3 right-6 flex flex-col items-end gap-3",children:[e("div",{className:C("max-h-96 max-w-72 overflow-y-auto overflow-x-hidden rounded-xl bg-white p-3 shadow-lg transition-all dark:bg-zinc-700",!n&&"invisible opacity-0"),children:u.map(s=>e("a",{href:`#${s.id}`,style:s.style,className:"block truncate text-zinc-700 transition dark:text-zinc-200",children:s.text}))}),e(T,{value:n,onClick:()=>f(!n)}),e("button",{onClick:()=>window.scrollTo(0,0),children:e(B,{src:L,className:"size-5 rotate-90"})})]})]}):e(_,{className:"absolute bottom-0 left-0 right-0 top-0 m-auto size-10"})})}export{P as default};
